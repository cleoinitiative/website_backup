[build]
builder = "nixpacks"

[deploy]
startCommand = "python -m uvicorn api.main:app --host 0.0.0.0 --port $PORT"
# Disable healthcheck temporarily to debug
# healthcheckPath = "/health"
# healthcheckTimeout = 300
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 3
numReplicas = 1

[env]
EMBEDDING_DEVICE = "cpu"
